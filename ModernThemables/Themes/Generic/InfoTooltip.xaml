<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:helperclasses="clr-namespace:CoreUtilities.HelperClasses;assembly=CoreUtilities">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="Converters.xaml" />
    </ResourceDictionary.MergedDictionaries>

    <helperclasses:BindingProxy x:Key="PrimaryText" Data="{DynamicResource PrimaryTextBrush}" />

    <ControlTemplate x:Key="GenericInfoTooltipTemplate" TargetType="ToolTip">
        <Grid>
            <Border
                Margin="10,5,10,10"
                Background="{TemplateBinding Background}"
                BorderBrush="{TemplateBinding BorderBrush}"
                BorderThickness="1"
                CornerRadius="5">
                <ContentPresenter Margin="{TemplateBinding Padding}" />
                <Border.Effect>
                    <DropShadowEffect
                        BlurRadius="10"
                        Opacity="0.6"
                        ShadowDepth="0"
                        Color="{Binding PrimaryText, Converter={StaticResource ColourInverterConverter}}" />
                </Border.Effect>
            </Border>
            <Grid
                Height="5"
                HorizontalAlignment="Center"
                VerticalAlignment="Top">
                <Polygon
                    Fill="{TemplateBinding Background}"
                    Points="5,0,10,5,0,5"
                    Stroke="{TemplateBinding BorderBrush}"
                    StrokeThickness="1">
                    <Polygon.Effect>
                        <DropShadowEffect
                            BlurRadius="10"
                            Opacity="0.6"
                            ShadowDepth="0"
                            Color="{Binding PrimaryText, Converter={StaticResource ColourInverterConverter}}" />
                    </Polygon.Effect>
                    <Polygon.Clip>
                        <RectangleGeometry Rect="-10,-20,50,30" />
                    </Polygon.Clip>
                </Polygon>
                <Border
                    Width="8"
                    Height="3"
                    Margin="-1,0,0,-2"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Bottom"
                    Background="{TemplateBinding Background}" />
            </Grid>
        </Grid>
    </ControlTemplate>

    <Style x:Key="InfoTooltip" TargetType="ToolTip">
        <Setter Property="OverridesDefaultStyle" Value="true" />
        <Setter Property="Placement" Value="Bottom" />
        <Setter Property="VerticalOffset" Value="3" />
        <Setter Property="HorizontalOffset">
            <Setter.Value>
                <MultiBinding Converter="{StaticResource CentreToolTipConverter}">
                    <Binding Path="PlacementTarget.ActualWidth" RelativeSource="{RelativeSource Self}" />
                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource Self}" />
                </MultiBinding>
            </Setter.Value>
        </Setter>
        <Setter Property="HasDropShadow" Value="False" />
        <Setter Property="FontSize" Value="12" />
        <Setter Property="Padding" Value="5,2" />
        <Setter Property="Foreground" Value="{DynamicResource PrimaryTextBrush}" />
        <Setter Property="Background" Value="{DynamicResource SecondaryControlBrush}" />
        <Setter Property="BorderBrush" Value="{DynamicResource PrimaryControlBrush}" />
        <Setter Property="Template" Value="{StaticResource GenericInfoTooltipTemplate}" />
    </Style>

</ResourceDictionary>
